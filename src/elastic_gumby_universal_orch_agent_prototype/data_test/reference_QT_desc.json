{
    "workflow_description": "# QT Assessment Workflow Description\n\n## 1. Initial Setup Phase\n### 1.1 Platform and Controller Initialization\n- Platform calls Controller InvokeAgent API for Orchestrator Agent\n- Controller creates DynamoDB item for orchestrator agent metadata\n- Controller invokes Orchestration Agent\n- Controller invocation ends\n- Updates DynamoDB item for orchestrator with initial state\n\n### 1.2 Orchestration Agent Initialization\n- Calls platform UpdateAgentInstance API to indicate running status\n- Calls platform GetJob API to retrieve job details\n- Generates the job plan (used to inform customer of what steps are happening)\n- Calls platform PutJobPlan API to store the plan\n- Calls platform UpdateJob API to update job status\n- Calls platform InvokeAgent API to start Import SubAgent\n- Updates DynamoDB item for orchestrator with waiting status\n- Orchestration agent invocation ends\n\n## 2. Import Phase\n### 2.1 Import SubAgent Initialization\n- Platform calls Controller InvokeAgent API for Import SubAgent\n- Controller creates DynamoDB item for Import SubAgent with metadata\n- Controller invokes Import SubAgent\n- Controller invocation ends\n- Updates DynamoDB state for Import SubAgent\n\n### 2.2 Import SubAgent Initial Processing\n- Calls platform UpdateAgentInstance API to indicate running status\n- Calls platform GetJob API to get job context\n- Calls platform UpdateJob API to update job context for import\n- Calls platform CreateHitlTask API to initiate file import HITL\n- Calls platform StartHitlTask API to start the import HITL\n- Updates DynamoDB state to indicate waiting for HITL\n- Import SubAgent invocation ends\n\n### 2.3 WebApp HITL File Import Process\n- Platform invokes WebApp HITL\n- WebApp imports customer file using CreateArtifactUploadUrl\n- Platform invokes Controller NotifyAgent API to inform HITL task complete\n- Controller invokes Import SubAgent\n- Controller invocation ends\n\n### 2.4 Import File Processing\n- Import SubAgent determines next step based on job status, invocation context, or DynamoDB state\n- Import SubAgent closes the HITL task\n- Import SubAgent calls platform CreateArtifactDownloadUrl to retrieve uploaded file\n- Import SubAgent downloads and parses import file\n- Import SubAgent stores parsed data in S3 Tables\n- Import SubAgent calls platform CreateHitlTask API to initiate an import findings HITL\n- Import SubAgent calls platform StartHitlTask to start the import findings HITL\n- Updates DynamoDB state to indicate waiting for findings review\n- Import SubAgent invocation ends\n\n### 2.5 Customer Review Loop\n- Platform invokes WebApp HITL for findings review\n- Customer reviews imported data and makes decision:\n  - If satisfied with import: continue to assessment\n  - If not satisfied: request to upload new file (loop back to WebApp HITL Process)\n- Platform invokes Controller NotifyAgent API to inform HITL task complete\n- Controller invokes Import SubAgent\n- Import SubAgent processes decision:\n  - If continuing to assessment:\n    - Calls platform GetJob API\n    - Calls platform UpdateJob API to update job status\n    - Calls UpdateAgentInstance API to indicate completed status\n    - Closes HITL task\n    - Updates DynamoDB state to completed\n  - If uploading new file:\n    - Creates new HITL task for file import\n    - Starts new HITL task\n    - Updates DynamoDB state\n    - (Process repeats from WebApp HITL File Import Process)\n\n## 3. Assessment Phase\n### 3.1 Assessment Initialization\n- Platform invokes controller NotifyAgent API to inform Import SubAgent complete\n- Controller invokes Orchestration Agent with notification\n- Orchestration Agent calls platform InvokeAgent for Assess SubAgent\n- Platform calls controller InvokeAgent API for Assess SubAgent\n- Controller creates DynamoDB item for Assess SubAgent with metadata\n- Controller invokes Assess SubAgent\n- Controller invocation ends\n\n### 3.2 Assessment Processing\n- Assess SubAgent calls platform UpdateAgentInstance API to indicate running status\n- Assess SubAgent calls platform GetJob API\n- Assess SubAgent calls platform UpdateJob API to update job context\n- Assess SubAgent retrieves S3 Table data\n- Assess SubAgent performs assessment and report generation\n- Assess SubAgent calls platform CreateArtifactUploadUrl API to store assessment report artifacts\n- Assess SubAgent calls platform CreateHitlTask API to initiate an assessment reporting HITL\n- Assess SubAgent calls platform StartHitlTask API to start the assessment reporting HITL\n- Updates DynamoDB state to indicate waiting for report review\n- Assess SubAgent invocation ends\n\n### 3.3 Final Review and Completion\n- Platform invokes WebApp HITL for report review\n- Customer reviews report and can:\n  - Download if satisfied\n  - Request refinement (not for MVP)\n- Platform invokes controller NotifyAgent API to indicate HITL complete\n- Controller invokes Assess SubAgent\n- Assess SubAgent processes decision:\n  - If refinement needed (not for MVP): performs refinement\n  - Otherwise: calls UpdateAgentInstance API to indicate completed status\n- Assess SubAgent closes HITL task\n- Updates DynamoDB state to completed\n- Platform invokes Orchestration agent via controller NotifyAgent API\n- Controller invokes Orchestration Agent\n- Orchestration Agent calls platform UpdateJob API to mark job as complete\n- Orchestration Agent calls UpdateAgentInstance API to indicate orchestration complete\n- Updates final DynamoDB state to completed"
}